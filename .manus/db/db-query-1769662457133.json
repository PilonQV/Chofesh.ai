{
  "query": "CREATE TABLE IF NOT EXISTS `webhooks` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `user_id` int NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `url` varchar(500) NOT NULL,\n  `secret` varchar(64) NOT NULL,\n  `events` json NOT NULL,\n  `active` boolean NOT NULL DEFAULT true,\n  `retry_config` json,\n  `last_delivery_at` timestamp NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `idx_user_id` (`user_id`),\n  KEY `idx_active` (`active`)\n);\n\nCREATE TABLE IF NOT EXISTS `webhook_deliveries` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `webhook_id` varchar(36) NOT NULL,\n  `event_type` varchar(50) NOT NULL,\n  `payload` json NOT NULL,\n  `status` enum('pending', 'delivered', 'failed', 'retrying') NOT NULL DEFAULT 'pending',\n  `attempts` int NOT NULL DEFAULT 0,\n  `max_attempts` int NOT NULL DEFAULT 5,\n  `response_status` int NULL,\n  `response_body` text NULL,\n  `error_message` text NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `next_retry_at` timestamp NULL,\n  `delivered_at` timestamp NULL,\n  PRIMARY KEY (`id`),\n  KEY `idx_webhook_id` (`webhook_id`),\n  KEY `idx_status` (`status`),\n  KEY `idx_next_retry` (`next_retry_at`),\n  FOREIGN KEY (`webhook_id`) REFERENCES `webhooks`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `scheduled_tasks` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `user_id` int NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `description` varchar(500) NULL,\n  `schedule_cron` varchar(100) NOT NULL,\n  `timezone` varchar(50) NOT NULL DEFAULT 'UTC',\n  `task_type` varchar(50) NOT NULL,\n  `task_config` json NOT NULL,\n  `active` boolean NOT NULL DEFAULT true,\n  `timeout_minutes` int NOT NULL DEFAULT 5,\n  `notify_on_complete` boolean NOT NULL DEFAULT true,\n  `notify_on_error` boolean NOT NULL DEFAULT true,\n  `last_run_at` timestamp NULL,\n  `next_run_at` timestamp NOT NULL,\n  `last_status` enum('success', 'error', 'timeout') NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `idx_user_id` (`user_id`),\n  KEY `idx_active` (`active`),\n  KEY `idx_next_run` (`next_run_at`)\n);\n\nCREATE TABLE IF NOT EXISTS `task_executions` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `task_id` varchar(36) NOT NULL,\n  `status` enum('pending', 'running', 'completed', 'failed', 'timeout', 'cancelled') NOT NULL DEFAULT 'pending',\n  `result` json NULL,\n  `error_message` text NULL,\n  `error_stack` text NULL,\n  `started_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `completed_at` timestamp NULL,\n  `duration_ms` int NULL,\n  `triggered_by` enum('scheduler', 'manual', 'api') NOT NULL DEFAULT 'scheduler',\n  PRIMARY KEY (`id`),\n  KEY `idx_task_id` (`task_id`),\n  KEY `idx_status` (`status`),\n  KEY `idx_started_at` (`started_at`),\n  FOREIGN KEY (`task_id`) REFERENCES `scheduled_tasks`(`id`) ON DELETE CASCADE\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 48hnjcx4CHbyzt9.87573283f85b --database ffmn4BbJe88bt6JMq4xy2a --execute CREATE TABLE IF NOT EXISTS `webhooks` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `user_id` int NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `url` varchar(500) NOT NULL,\n  `secret` varchar(64) NOT NULL,\n  `events` json NOT NULL,\n  `active` boolean NOT NULL DEFAULT true,\n  `retry_config` json,\n  `last_delivery_at` timestamp NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `idx_user_id` (`user_id`),\n  KEY `idx_active` (`active`)\n);\n\nCREATE TABLE IF NOT EXISTS `webhook_deliveries` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `webhook_id` varchar(36) NOT NULL,\n  `event_type` varchar(50) NOT NULL,\n  `payload` json NOT NULL,\n  `status` enum('pending', 'delivered', 'failed', 'retrying') NOT NULL DEFAULT 'pending',\n  `attempts` int NOT NULL DEFAULT 0,\n  `max_attempts` int NOT NULL DEFAULT 5,\n  `response_status` int NULL,\n  `response_body` text NULL,\n  `error_message` text NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `next_retry_at` timestamp NULL,\n  `delivered_at` timestamp NULL,\n  PRIMARY KEY (`id`),\n  KEY `idx_webhook_id` (`webhook_id`),\n  KEY `idx_status` (`status`),\n  KEY `idx_next_retry` (`next_retry_at`),\n  FOREIGN KEY (`webhook_id`) REFERENCES `webhooks`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `scheduled_tasks` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `user_id` int NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `description` varchar(500) NULL,\n  `schedule_cron` varchar(100) NOT NULL,\n  `timezone` varchar(50) NOT NULL DEFAULT 'UTC',\n  `task_type` varchar(50) NOT NULL,\n  `task_config` json NOT NULL,\n  `active` boolean NOT NULL DEFAULT true,\n  `timeout_minutes` int NOT NULL DEFAULT 5,\n  `notify_on_complete` boolean NOT NULL DEFAULT true,\n  `notify_on_error` boolean NOT NULL DEFAULT true,\n  `last_run_at` timestamp NULL,\n  `next_run_at` timestamp NOT NULL,\n  `last_status` enum('success', 'error', 'timeout') NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `idx_user_id` (`user_id`),\n  KEY `idx_active` (`active`),\n  KEY `idx_next_run` (`next_run_at`)\n);\n\nCREATE TABLE IF NOT EXISTS `task_executions` (\n  `id` varchar(36) NOT NULL DEFAULT (uuid()),\n  `task_id` varchar(36) NOT NULL,\n  `status` enum('pending', 'running', 'completed', 'failed', 'timeout', 'cancelled') NOT NULL DEFAULT 'pending',\n  `result` json NULL,\n  `error_message` text NULL,\n  `error_stack` text NULL,\n  `started_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `completed_at` timestamp NULL,\n  `duration_ms` int NULL,\n  `triggered_by` enum('scheduler', 'manual', 'api') NOT NULL DEFAULT 'scheduler',\n  PRIMARY KEY (`id`),\n  KEY `idx_task_id` (`task_id`),\n  KEY `idx_status` (`status`),\n  KEY `idx_started_at` (`started_at`),\n  FOREIGN KEY (`task_id`) REFERENCES `scheduled_tasks`(`id`) ON DELETE CASCADE\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 792
}